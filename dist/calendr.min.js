/*
 * calendr - v0.0.3
 * 2014-05-01
 * License: MIT
 */
!function(){function a(a,b){"undefined"==typeof b&&(b={}),this._date=a,this.moment=g(this._date),this.dayObjects=b.dayObjects||!1,this.auto=b.auto||!1,this.build()}function b(){var a=this,b=a.moment,c=Array.apply(null,Array(a.numofdays));return c.map(function(c,d){return f.call(a,d+1,b)})}function c(a){for(var b=this,c=b.prevmonth,d=c.daysInMonth(),e=0,g=b.startson;g>e;e++)a.splice(0,0,f.call(b,d-e,c))}function d(a){for(var b=this,c=b.nextmonth,d=0,e=7-a.length;e>d;d++)a.push(f.call(b,d+1,c))}function e(a,b,c){this.date=a,this.month=b,this.year=c}function f(a,b){return this.dayObjects?new e(a,b.month()+1,b.year()):a}var g;if("undefined"!=typeof module&&"undefined"!=typeof module.exports)g=require("moment"),module.exports=a;else{if(!("moment"in window))return console.error("Moment.js is required");g=window.moment,window.Calendr=a}var h=["January","February","March","April","May","June","July","August","September","October","November","December"];a.prototype.build=function(){this.year=this.moment.year(),this.month=this.moment.month()+1,this.monthInEnglish=h[this.month-1],this.numofdays=this.moment.daysInMonth(),this.startson=g(this.year+"-"+this.month,"YYYY-MM").day(),this.endson=g(this.year+"-"+this.month+"-"+this.numofdays,"YYYY-MM-DD").day(),this.prevmonth=g(new Date(this.moment)).subtract("month",1),this.nextmonth=g(new Date(this.moment)).add("month",1),this.prevmonthInEnglish=h[this.prevmonth.month()],this.nextmonthInEnglish=h[this.nextmonth.month()],this.auto?this._grid=this.slice():delete this._grid},a.prototype.__defineGetter__("grid",function(){return this._grid||(this._grid=this.slice())}),a.prototype.slice=function(){var a=b.call(this);c.call(this,a);var e=Math.ceil(a.length/7),f=Array.apply(null,Array(e)).map(function(b,c){var d=7*c,e=7*(c+1);return a.slice(d,e)});return d.call(this,f[e-1]),f},a.prototype.goForwardMonth=function(){this.moment.add("month",1),this.build()},a.prototype.goBackMonth=function(){this.moment.subtract("month",1),this.build()},a.prototype.__defineGetter__("today",function(){var a=new Date;if(this.month===a.getMonth()+1&&this.year===a.getFullYear())for(var b=[].concat.apply([],this.grid),c=b.length,d=a.getDate()-1;c>d;d++){var e=b[d];if(e.isToday||e==a.getDate())return e}}),e.prototype.__defineGetter__("isToday",function(){var a=new Date;return this.date==a.getDate()&&this.month==a.getMonth()+1&&this.year==a.getFullYear()})}();